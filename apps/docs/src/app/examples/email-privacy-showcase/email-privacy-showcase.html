<div class="p-6 space-y-6">
  <div class="space-y-4">
    <div>
      <label hlmLabel class="text-sm font-medium mb-2 block">Email Address</label>
      <input
        hlmInput
        type="email"
        [(ngModel)]="emailAddress"
        placeholder="Enter email address"
        class="w-full"
      />
      @if (emailValidation(); as validation) {
        <p class="text-xs mt-1.5" [class.text-red-500]="!validation.valid" [class.text-green-600]="validation.valid">
          {{ validation.message }}
        </p>
      }
    </div>

    <div class="flex items-center justify-between p-4 rounded-lg border border-border bg-muted/30">
      <div class="flex items-center gap-3">
        <ng-icon [name]="maskingEnabled() ? 'lucideEyeOff' : 'lucideEye'" class="h-5 w-5 text-muted-foreground"></ng-icon>
        <div>
          <p class="text-sm font-medium">Email Privacy</p>
          <p class="text-xs text-muted-foreground">{{ maskingEnabled() ? 'Username partially hidden' : 'Full email visible' }}</p>
        </div>
      </div>
      <button
        hlmBtn
        [variant]="maskingEnabled() ? 'default' : 'outline'"
        size="sm"
        (click)="toggleMasking()"
      >
        {{ maskingEnabled() ? 'Protected' : 'Exposed' }}
      </button>
    </div>
  </div>

  <div hlmSeparator class="my-6"></div>

  <div class="space-y-4">
    <h3 class="text-lg font-semibold flex items-center gap-2">
      <ng-icon name="lucideMail" class="h-5 w-5 text-primary"></ng-icon>
      Display Result
    </h3>

    <div class="rounded-lg border-2 border-border bg-background p-8 text-center">
      @if (emailAddress()) {
        <div class="space-y-4">
          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-muted text-xs font-medium text-muted-foreground">
            <ng-icon name="lucideUserCircle" class="h-3.5 w-3.5"></ng-icon>
            {{ maskingEnabled() ? 'Privacy Mode' : 'Full Display' }}
          </div>

          <div class="flex items-center justify-center gap-3">
            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center">
              <ng-icon name="lucideMail" class="h-6 w-6 text-primary"></ng-icon>
            </div>
            <div class="text-2xl font-medium font-mono break-all">
              {{ displayEmail() }}
            </div>
          </div>

          <div class="flex items-center justify-center gap-6 text-sm text-muted-foreground">
            <div class="flex items-center gap-1.5">
              <div class="h-2 w-2 rounded-full" [class.bg-green-500]="maskingEnabled()" [class.bg-orange-500]="!maskingEnabled()"></div>
              <span>{{ maskingEnabled() ? 'Masked' : 'Unmasked' }}</span>
            </div>
            @if (maskingEnabled()) {
              <div class="flex items-center gap-1.5">
                <ng-icon name="lucideShield" class="h-3.5 w-3.5"></ng-icon>
                <span>Identity Protected</span>
              </div>
            }
          </div>
        </div>
      } @else {
        <div class="text-muted-foreground">
          <ng-icon name="lucideMailOpen" class="h-12 w-12 mx-auto mb-3 opacity-30"></ng-icon>
          <p class="text-sm">Enter an email address above</p>
        </div>
      }
    </div>
  </div>

  <div hlmSeparator class="my-6"></div>

  <div class="space-y-4">
    <h3 class="text-lg font-semibold">Masking Visualization</h3>
    <div class="rounded-lg border border-border p-6 bg-muted/30">
      @if (emailAddress() && emailValidation()?.valid) {
        <div class="space-y-4">
          <div class="flex items-center justify-between text-sm">
            <span class="text-muted-foreground">Username length:</span>
            <span class="font-mono font-bold">{{ emailParts().local.length || 0 }} characters</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <span class="text-muted-foreground">Visible characters:</span>
            <span class="font-mono font-bold">{{ visibleCharsCount() }} of {{ emailParts().local.length || 0 }}</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <span class="text-muted-foreground">Hidden characters:</span>
            <span class="font-mono font-bold">{{ hiddenCharsCount() }}</span>
          </div>
          <div class="w-full bg-muted rounded-full h-3 overflow-hidden">
            <div
              class="h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-300"
              [style.width.%]="(visibleCharsCount() / (emailParts().local.length || 1)) * 100"
            ></div>
          </div>
          <p class="text-xs text-center text-muted-foreground">
            {{ ((visibleCharsCount() / (emailParts().local.length || 1)) * 100).toFixed(0) }}% of username visible
          </p>
        </div>
      } @else {
        <p class="text-sm text-muted-foreground text-center">Enter a valid email to see masking statistics</p>
      }
    </div>
  </div>

  <div hlmSeparator class="my-6"></div>

  <div class="space-y-4">
    <h3 class="text-lg font-semibold">Example Email Addresses</h3>
    <div class="grid grid-cols-1 gap-3">
      @for (example of emailExamples; track example.label) {
        <button
          hlmBtn
          variant="outline"
          class="justify-start text-left h-auto py-3"
          (click)="loadExample(example.email)"
        >
          <div class="flex-1">
            <div class="flex items-center gap-2 mb-1">
              <ng-icon [name]="example.icon" class="h-4 w-4"></ng-icon>
              <span class="font-medium text-sm">{{ example.label }}</span>
            </div>
            <div class="text-xs text-muted-foreground">{{ example.email }}</div>
          </div>
          <div class="flex flex-col items-end gap-1">
            <code class="text-xs font-mono">{{ example.email | emailMask }}</code>
            <ng-icon name="lucideArrowRight" class="h-3.5 w-3.5 opacity-50"></ng-icon>
          </div>
        </button>
      }
    </div>
  </div>

  <div hlmSeparator class="my-6"></div>

  <div class="rounded-lg border border-purple-500/50 bg-purple-500/10 p-4">
    <div class="flex items-start gap-3">
      <ng-icon name="lucideInfo" class="h-5 w-5 text-purple-600 dark:text-purple-400 shrink-0 mt-0.5"></ng-icon>
      <div class="text-sm">
        <p class="font-medium text-purple-900 dark:text-purple-100 mb-1">Privacy Best Practice</p>
        <p class="text-purple-800 dark:text-purple-200">
          Masking email addresses protects user identity in public displays, logs, and non-secure interfaces.
          The domain remains visible for context (e.g., identifying corporate vs. personal emails) while hiding
          the specific username.
        </p>
      </div>
    </div>
  </div>
</div>
